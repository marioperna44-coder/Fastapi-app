<style>
  /* Spezifisches Layout fÃ¼r diese View */
  .user-toolbar {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
    gap: 10px;
    background-color: var(--grau-hell);
    padding: 10px;
    border-radius: 6px;
    border: 1px solid #444;
  }

  .toolbar-right {
    margin-left: auto;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .btn-icon {
    width: 36px; 
    height: 36px;
    padding: 0;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2rem;
  }

  /* Hilfsklasse fÃ¼r gelÃ¶schte Zeilen */
  .deleted-user {
    background-color: rgba(164, 22, 26, 0.2) !important;
    color: #ffcccc;
  }
  
  .table-responsive {
    overflow-x: auto;
  }

  /* ========================================= */
  /* FIX: Fehlende Klassen fÃ¼r Buttons ergÃ¤nzen */
  /* ========================================= */
  
  /* Wiederherstellen-Button (GrÃ¼n, passend zum Theme) */
  .btn-success {
    background-color: #28a745; 
    color: var(--text-weiss) !important; /* Erzwingt weiÃŸe Schrift */
  }
  .btn-success:hover {
    background-color: #218838;
  }

  /* Umschalt-Button aktiver Zustand (Blau zur Unterscheidung oder Theme-GrÃ¼n) */
  .btn-info {
    background-color: #17a2b8;
    color: var(--text-weiss) !important;
  }
  .btn-info:hover {
    background-color: #138496;
  }
</style>

<div class="user-management">
  <h2>ğŸ‘¤ Benutzerverwaltung</h2>

  <!-- Toolbar Container -->
  <div class="user-toolbar">
    
    <!-- Linke Gruppe -->
    <button id="btn-new-user" class="btn btn-primary">
      â• Neuer Benutzer
    </button>
    <button id="btn-refresh-users" class="btn btn-secondary">
      ğŸ”„ Aktualisieren
    </button>

    <!-- Rechte Gruppe -->
    <div class="toolbar-right">
        <!-- Umschalt-Button -->
        <button id="btn-toggle-deleted" class="btn btn-secondary">
          ğŸ‘€ VollstÃ¤ndige Ansicht
        </button>

        <!-- Export Button -->
        <button id="btn-export-users" class="btn btn-primary btn-icon" title="Liste exportieren">
          ğŸ“„
        </button>
    </div>
  </div>

  <!-- Tabelle -->
  <div class="table-container">
      <table id="users-table" class="table table-striped table-hover">
        <thead>
          <tr>
            <th>ID</th>
            <th>Benutzername</th>
            <th>E-Mail</th>
            <th>Rolle</th>
            <th>Aktiv</th>
            <th>Letzter Login</th>
            <th>Aktionen</th>
          </tr>
        </thead>
        <tbody>
            <!-- Wird per JS gefÃ¼llt -->
        </tbody>
      </table>
  </div>
</div>

<!-- ===================== -->
<!-- Modal: Neuer Benutzer -->
<!-- ===================== -->
<div id="newUserModal" class="modal hidden">
  <div class="modal-content">
    <h3>â• Neuer Benutzer</h3>

    <form id="newUserForm">
      <div class="form-group">
        <label for="username">Benutzername *</label>
        <input type="text" id="username" name="username" class="form-control" required />
      </div>

      <div class="form-group">
        <label for="email">E-Mail *</label>
        <input type="email" id="email" name="email" class="form-control" required />
      </div>

      <div class="form-group">
        <label for="role_id">Rolle (ID)</label>
        <input type="number" id="role_id" name="role_id" class="form-control" placeholder="z. B. 1 fÃ¼r Admin" />
      </div>

      <div class="form-group">
        <label>
          <input type="checkbox" id="active" name="active" checked />
          Aktiv
        </label>
      </div>

      <div class="modal-actions">
        <button type="submit" class="btn btn-primary">ğŸ’¾ Speichern</button>
        <button type="button" id="cancelNewUserModal" class="btn btn-secondary">Abbrechen</button>
      </div>
    </form>
  </div>
</div>

<!-- ========================== -->
<!-- Modal: Benutzer bearbeiten -->
<!-- ========================== -->
<div id="editUserModal" class="modal hidden">
  <div class="modal-content">
    <h3 id="editModalTitle">âœï¸ Benutzer bearbeiten</h3>

    <form id="editUserForm">
      <div class="form-group">
        <label for="edit-username">Benutzername</label>
        <input type="text" id="edit-username" name="username" class="form-control" required />
      </div>

      <div class="form-group">
        <label for="edit-email">E-Mail</label>
        <input type="email" id="edit-email" name="email" class="form-control" required />
      </div>

      <div class="form-group">
        <label for="edit-role_id">Rolle</label>
        <select id="edit-role_id" name="role_id" class="form-control"></select>
      </div>

      <div class="form-group">
        <label>
          <input type="checkbox" id="edit-active" name="active" /> Aktiv
        </label>
      </div>

      <div class="modal-actions">
        <button type="submit" class="btn btn-primary">ğŸ’¾ Speichern</button>
        <button type="button" id="resetPasswordBtn" class="btn btn-secondary">ğŸ”‘ PW-Reset</button>
        <button type="button" id="cancelEditModal" class="btn btn-danger">Abbrechen</button>
      </div>
    </form>
  </div>
</div>